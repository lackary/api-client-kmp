# GitHub 自動化工作流程

這個流程旨在實現開發、測試與部署的高度自動化，並透過專案看板即時追蹤進度。它將繁瑣的步驟轉化為可預測的自動化，讓團隊能專注於創造價值。

## 1. Issue 創建與排程

**流程：** 當新的 `Issue` 被創建時，自動化在 GitHub Projects 中生成一個 `Item`，並將其狀態設為 `Backlog`。

**目的：** 所有工作都有一個明確的起點。

## 2. 開發階段

**流程：**

* 團隊手動將 Item 狀態從 `Backlog` 切換至 `To Do`，表示任務已準備好開始。
* 開發者領取任務並手動將 Item 狀態設為 `In Progress`，同時創建新分支並開始開發，所有提交必須遵循 **[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/)** 規範。

**目的：** 專案看板能準確反映工作進度。

## 3. PR 創建與持續整合 (CI)

**流程：**

* 當開發者推送程式碼並創建 PR 時，自動化會將 Item 狀態切換至 `In Review`。
* GitHub Actions 會立即觸發 CI 流程（建置與測試）。
* PR 描述中必須包含 `Closes #<Issue 編號>`，以便在合併後自動關閉 Issue。

**目的：** 在程式碼進入主分支前，確保其品質和規範。

## 4. 自動化發布與 QA 測試

**流程：**

* 只有當 PR 被批准且 CI 檢查都通過時，才被允許合併到 `main` 分支。
* PR 合併後，自動化將 Item 狀態設為 `Done`。
* **自動化會等待一段可設定的時間（例如 5 分鐘），以批次處理所有在短時間內合併的 PR。**
  * **註：** 這個等待時間的設定應考量**團隊規模**、**開發節奏**及**部署頻率**。
  * **考量因素：**
    * **小型團隊 (1-5 人)：** 可設定較短的時間（如 **5-15 分鐘**），以追求高頻率的小批次部署。
    * **中型團隊 (5-15 人)：** 適合設定 **30 分鐘至 1 小時**，以平衡部署頻率與 QA 團隊的工作量。
    * **大型團隊或複雜專案：** 可考慮設定較長的時間（如 **2-4 小時**），甚至與固定的部署時間點結合。
* 批次時間結束後，自動化觸發 CD 流程，將最新的程式碼（包含所有批次內的 PR）部署到 Staging 環境。
* 自動化根據 Conventional Commits 訊息，提升 **[Semantic Versioning (SemVer)](https://semver.org/)** 版本號（PATCH, MINOR, MAJOR），建立Git Tag （例如：`v1.2.3`）
* **自動化根據本次合併的 PR 數量，動態生成 QA 測試 Issue：**
  * **如果只有一個 PR 合併：** Issue 標題為 `QA 驗證：<PR 標題>`。
  * **如果有多個 PR 合併：** Issue 標題為 `QA 驗證：發布版本 v<版本號>`，並在 Issue 描述中列出所有合併的 PR 連結，以供追蹤。
* Issue 狀態自動設為 `In Test`。

**目的：** 在確保每個 PR 獨立的同時，優化部署頻率，減少 QA 測試次數。

## 5. 測試回饋與 Bug 修復

**流程：**

* 如果 QA 發現 Bug，他們會在 QA Issue 中報告，並手動將其狀態切換為 `Bug`。
* 為這個 Bug 單獨創建一個新的 Bug Issue，並遵循第 2 步的開發流程。
* Bug Issue 的 PR 合併後，QA 團隊會重新測試原來的 QA Issue，以確保問題已被修復。

**目的：** 建立一個清晰的 Bug 追蹤與修復循環，確保問題能被系統化地處理。

## 6. 最終發布

**流程：**

* 當 QA 測試 Issue 被確認沒有問題時，手動將其狀態切換為 `Done`。
* 手動或自動化在所有 QA 測試都通過後，將程式碼從 `Staging` 環境部署到 `Production` 環境。

**目的：** 確保最終發布到正式環境的版本是穩定且高品質的。
